# 使用指南

本文以一个部署在中国的web站点服务 www.ucloud.cn ， 需要针对洛杉矶、香港地域的客户端用户加速的场景为例。

其中加速线路可选择专线版线路即“线路管理”或基于UCloud公网的“海外SD-WAN”，两种线路的创建流程一样，本文以专线版的加速线路为例。

1）进入线路管理列表，列表显示线路 带宽等关键信息。![](/images/linelist.png) 

点击列表左上角的创建按钮 进入创建页面；源站选择中国，加速区域选择中国香港和洛杉矶，下方会出现两条线路，右侧显示当前带宽值，根据需要调整。购买加速线路成功后回到线路管理列表 会显示所有购买的线路数据。![](/images/pathx_upath_create.png)


2）在线路管理列表，点击每行记录右侧的修改带宽按钮 弹出框内完成修改带宽。 ![](/images/modifybandwidth.png)


3）进入加速配置管理列表，列表显示加速域名、协议端口等关键信息。![](/images/ugalist.png) 

点击列表左上角的创建按钮, 进入创建配置页面，填写源站域名或源站IP www.ucloud.cn， 选择源站所在地 中国。此时加速线路下拉列表可以选择之前已经购买的线路（中国香港到中国和洛杉矶到中国）全部勾选。根据您的业务需要勾选4层和7层并设置端口号，选择HTTPS-HTTP或HTTPS-HTTPS协议需要绑定SSL证书。下拉列表中没有证书时，请点击上传新证书。![](/images/pathx_uga_create.png)

4）在线路管理列表,点击修改加速区按钮，弹出框内即可完成线路的替换。 ![](/images/modifyuga.png)


5）在加速配置列表页，鼠标移动到协议端口内容上，会显示出一个修改端口的图标，点击后进入修改端口弹出层。![](/images/modifyport.png) 注意: 4层TCP协议端口和7层加速端口是不能重复的 且 4层+7层加速端口总数不能超过50个。


6）证书管理页面，可以查看证书的过期时间、证书域名、使用该证书的加速配置等关键信息，
![](/images/certificatelist.png)  
点击添加按钮可以上传新的SSL证书。
![](/images/addcertificate.png)

7）需要查阅监控数据、价格、线路出口、设置监控告警等信息，可以点击列表中每一行最右侧的详情按钮。加速线路实例详情页如下所示：
![](/images/pathx_upath_detail.png)  
加速配置实例详情页如下所示：
![](/images/pathx_uga_detail.png)

8）加速配置创建成功返回加速域名后，通常要等1分钟时间才能各项配置生效。

先使用 nc 或 telnet $yours.pathx.ucloudgda.com $yoursport 来验证加速服务生效状态，务必确保加速服务生效后再将您的业务域名CName到加速域名上。

> 禁用加速域名直接提供HTTP/HTTPS访问。

场景一：业务域名托管的DNS解析服务商 支持 按地区智能解析

业务域名 www.ucloud.cn 在中国地区有一条A记录指向 106.75.148.xx，保留该条记录；
创建加速配置后，复制加速域名，在DNS解析服务控制台上为美国和中国香港地区各增加一条解析记录，类型选择CName，值填写 $yours.pathx.ucloudgda.com，配置完成后，等待dns全球生效后，在美国或中国香港地区dig www.ucloud.cn 即可看到pathx的加速域名，而在中国大陆地区 dig www.ucloud.cn ，依然得到源站 106.75.148.xx

场景二：业务域名托管的DNS解析服务商 不支持 按地区智能解析

如果您期望在加速区域CName到加速域名，同时在源站部署区域 客户端请求访问直接去源站。目前推荐的办法是在加速区域申请使用新的域名如 web.ucloud.cn，添加默认 CName记录到 $yours.pathx.ucloudgda.com。而www.ucloud.cn 保留原来的DNS记录不变。


# 使用限制
PathX存在一些常见的限制，如下：

1）购买加速区域在中国大陆地区的PathX线路，如果您需要将业务域名解析到Pathx的加速域名或加速IP上，按照中华人民共和国相关法律规定，该业务域名必须备案，没有备案的域名流量进入公有云，云厂商会执行封堵。 直接使用加速域名和加速IP无需备案。

2）端口数量有限制，单个加速配置（uga-前缀的实例）各类协议端口总数不超过50个，由于技术方案的限制暂时不支持全端口转发。七层和4层转发时，65123作为保留端口禁止用户使用。

3）使用七层端口转发功能时，http请求头大小限制为8KB，请求body大小限制为8MB。
